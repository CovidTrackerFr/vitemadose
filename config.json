{
    "scrape_on_n_days": 28,
    "base_urls": {
        "gitlab_public_path": "https://vitemadose.gitlab.io/vitemadose/",
        "github_public_path": "https://raw.githubusercontent.com/CovidTrackerFr/vitemadose/data-auto/"
    },
    "inputs": {
        "from_main_branch": {
            "departements": "data/input/departements-france.csv",
            "blocklist": "data/input/centers_blocklist.json",
            "postalcode_to_insee": "data/input/codepostal_to_insee.json",
            "cedex_to_insee": "data/input/cedex_to_insee.json",
            "insee_to_postalcode_and_dep": "data/input/insee_to_codepostal_and_code_departement.json",
            "map": "data/input/map.svg",
            "dep_pop": "data/input/dep-pop.csv"
        },
        "from_data_gouv_website": {
            "centers_gouv": "https://www.data.gouv.fr/fr/datasets/r/5cb21a85-b0b0-4a65-a249-806a040ec372",
            "rdv_gouv": "https://www.data.gouv.fr/fr/datasets/r/b7bd49cd-904c-4c5d-b60f-018b51df9b0e"
        },
        "from_gitlab_public": {
            "last_scans": "info_centres.json",
            "center_types": "stats_center_types.json",
            "by_date": "stats_by_date.json",
            "by_date_dep": "stats_by_date_dep.json"


        }
    },
    "outputs": {
        "centers_json_path": "data/output/{0}_center_list.json",
        "last_scans": "data/output/info_centres.json",
        "data_gouv": "data/output/centres_open_data.json",
        "stats": {
            "by_vaccine_type": "data/output/stats_by_vaccine.json",
            "global": "data/output/stats.json"
        }
    },
    "vaccines": {
        "Pfizer-BioNTech": [
            "pfizer",
            "biontech"
        ],
        "Moderna": [
            "moderna"
        ],
        "ARNm": [
            "arn",
            "arnm",
            "arn-m",
            "arn m"
        ],
        "AstraZeneca": [
            "astrazeneca",
            "astra-zeneca",
            "astra zeneca",
            "az",
            "astra"
        ],
        "Janssen": [
            "janssen",
            "jansen",
            "jansenn",
            "jannsen",
            "jenssen",
            "jensen",
            "jonson",
            "johnson",
            "johnnson",
            "j&j"
        ]
    },
    "reserved_centers": [
        "professions prioritaires",
        "professionnels de santé",
        "professionnels prioritaires",
        "personnels prioritaires"
    ],
    "platforms": {
        "doctolib": {
            "enabled": true,
            "timeout": 5,
            "recognized_urls": [
                "https://partners.doctolib.fr",
                "https://www.doctolib.fr"
            ],
            "build_url": "https://www.doctolib.fr{url_path}?pid={place_id}",
            "api": {
                "booking": "https://partners.doctolib.fr/booking/{centre}.json",
                "slots": "https://partners.doctolib.fr/availabilities.json?start_date={start_date}&visit_motive_ids={motive_id}&agenda_ids={agenda_ids_q}&insurance_sector=public&practice_ids={practice_ids_q}&destroy_temporary=true&limit={limit}",
                "scraper": "http://www.doctolib.fr/vaccination-covid-19/france.json?page={0}",
                "scraper_dep": "http://www.doctolib.fr/vaccination-covid-19/{0}.json?page={1}"
            },
            "request_sleep": 0.05,
            "days_per_page": 7,
            "filters": {
                "appointment_reason": [
                    "1 ere injection",
                    "1 ère injection",
                    "1er injection",
                    "1ere dose",
                    "1ere injection",
                    "1ère injection",
                    "1re injection",
                    "vaccination",
                    "Vaccin COVID-19",
                    "injection unique"
                ],
                "appointment_category": [
                    "18 à 54",
                    "55 ans",
                    "70 ans",
                    "50 ans",
                    "18 ans",
                    "16 ans",
                    "majeur",
                    "mineur",
                    "eligibles",
                    "éligibles",
                    "astra Zeneca",
                    "femmes enceintes",
                    "grossesse",
                    "injection unique",
                    "janssen",
                    "je ne suis pas professionnel de santé",
                    "je suis un particulier",
                    "non professionnels de santé",
                    "patient",
                    "personnes à très haut risque",
                    "personnes âgées de 60 ans ou plus",
                    "personnes de 60 ans et plus",
                    "personnes de plus de",
                    "pfizer",
                    "public",
                    "vaccination au centre",
                    "vaccination covid",
                    "vaccination pfizer",
                    "assesseur",
                    "vote",
                    "pharmacien",
                    "vaccin",
                    "réservation en ligne",
                    "réservable en ligne",
                    "comorbidités",
                    "enceinte",
                    "immunodéprimée",
                    "18",
                    "consultation",
                    "eligibles",
                    "très haut risque",
                    "moderna",
                    "astra",
                    "astrazeneca",
                    "pré-consultation"
                ]
            },
            "center_scraper": {
                "result_path": "data/output/doctolib-centers.json",
                "business_days": [
                    "lundi",
                    "mardi",
                    "mercredi",
                    "jeudi",
                    "vendredi",
                    "samedi",
                    "dimanche"
                ],
                "center_types": {
                    "pharmacie": "drugstore",
                    "medecin": "general-practitioner",
                    "*": "vaccination-center"
                },
                "categories": [
                    "hopital-public",
                    "centre-de-vaccinations-internationales",
                    "centre-de-sante",
                    "pharmacie",
                    "medecin-generaliste",
                    "centre-de-vaccinations-internationales",
                    "centre-examens-de-sante"
                ],
                "dep_conversion": {
                    "indre": "departement-indre",
                    "gironde": "departement-gironde",
                    "mayenne": "departement-mayenne",
                    "vienne": "departement-vienne"
                }
            }
        },
        "keldoc": {
            "enabled": false,
            "timeout": 20,
            "recognized_urls": [
                "https://vaccination-covid.keldoc.com",
                "https://keldoc.com"
            ],
            "api": {
                "booking": "https://booking.keldoc.com/api/patients/v2/searches/resource",
                "motives": "https://booking.keldoc.com/api/patients/v2/clinics/{0}/specialties/{1}/cabinets/{2}/motive_categories",
                "cabinets": "https://booking.keldoc.com/api/patients/v2/clinics/{0}/specialties/{1}/cabinets",
                "slots": "https://www.keldoc.com/api/patients/v2/timetables/{0}",
                "center_list": "https://www.keldoc.com/api/patients/v2/searches/geo_location?specialty_id={motive}&raw_location={dep}&page={page_id}",
                "center_details": "https://www.keldoc.com/api/patients/v2/cabinets/{0}/details"
            },
            "days_per_page": 5,
            "filters": {
                "appointment_speciality_urls": [
                    "maladies-infectieuses",
                    "vaccination-covid-19",
                    "vaccination-covid19"
                ],
                "appointment_speciality": [
                    "Maladies infectieuses",
                    "COVID19 - Vaccination"
                ],
                "vaccination_speciality_ids": [
                    "144",
                    "496"
                ],
                "appointment_skill": [
                    "Centre de vaccination COVID-19"
                ],
                "appointment_reason": [
                    "1 er inj",
                    "1 ere inj",
                    "1 ère inj",
                    "1ere dose",
                    "1ère dose",
                    "1ere inj",
                    "1ère inj",
                    "covid19 - vaccination",
                    "inj 1",
                    "inj. 1",
                    "inj1",
                    "1 injection",
                    "première dose",
                    "1° injection",
                    "première injection",
                    "mono-injection",
                    "mono injection",
                    "mono-dose",
                    "mono dose",
                    "injection unique",
                    "première injection",
                    "vaccination ouverte"
                ]
            },
            "center_scraper": {
                "result_path": "data/output/keldoc_centers.json",
                "center_types": {
                    "pharmacie": "drugstore",
                    "medecin": "general-practitioner",
                    "*": "vaccination-center"
                }
            },
            "dep_conversion": {
                "Bas-Rhin": "rhin-bas",
                "Haut-Rhin": "rhin-haut",
                "Hautes-Alpes": "alpes-hautes",
                "Haute-Loire": "loire-haute",
                "Haute-Marne": "marne-haute",
                "Hautes-Pyrénées": "pyrenees-haute",
                "Haute-Saône": "saune-haute",
                "Haute-Savoie": "savoie-haute",
                "Deux-Sèvres": "sevres-deux",
                "Haute-Vienne": "vienne-haute",
                "Territoire de Belfort": "belfort-territoire-de"
            },
            "missing_deps": [
                "la-reunion-97",
                "haute-garonne",
                "ille-et-villaine",
                "---"
            ]
        },
        "maiia": {
            "enabled": true,
            "timeout": 5,
            "base_url": "https://www.maiia.com",
            "recognized_urls": [
                "https://www.maiia.com"
            ],
            "api": {
                "scraper": "https://www.maiia.com/api/pat-public/hcd?distanceMax=10000&AllVaccinationPlaces=true&speciality.shortName={speciality}",
                "slots": "https://www.maiia.com/api/pat-public/availabilities?centerId={center_id}&consultationReasonName={consultation_reason_name}&from={start_date}&to={end_date}",
                "next_slot": "https://www.maiia.com/api/pat-public/availability-closests?centerId={center_id}&consultationReasonName={consultation_reason_name}&from={start_date}",
                "motives": "https://www.maiia.com/api/pat-public/consultation-reason-hcd?rootCenterId={center_id}"
            },
            "center_scraper": {
                "centers_per_page": 100,
                "result_path": "data/output/maiia_centers.json",
                "categories": [
                    "centre-de-vaccination",
                    "pharmacie",
                    "centre-hospitalier-(ch)"
                ],
                "specialities": [
                    "VAC01"
                ],
                "excluded_ids": [
                    "603e4fae8c512e753fc49ba1"
                ],
                "excluded_names": [
                    "test",
                    "antigenique",
                    "antigénique"
                ],
                "business_days": {
                    "Lundi": "MONDAY",
                    "Mardi": "TUESDAY",
                    "Mercredi": "WEDNESDAY",
                    "Jeudi": "THURSDAY",
                    "Vendredi": "FRIDAY",
                    "Samedi": "SATURDAY",
                    "Dimanche": "SUNDAY"
                }
            },
            "filters": {
                "injection_type": [
                    "FIRST"
                ]
            }
        },
        "mapharma": {
            "enabled": true,
            "timeout": 5,
            "recognized_urls": [
                "https://mapharma.net"
            ],
            "api": {
                "opendata": "https://mapharma.net/opendata/rdv",
                "opendata_fallback": "https://raw.githubusercontent.com/CovidTrackerFr/vitemadose/data-auto/data/output/mapharma_open_data.json",
                "slots": "https://mapharma.net/api/public/calendar/{campagneId}/{start_date}/{optionId}"
            },
            "headers": {
                "referer": "https://mapharma.net/"
            },
            "paths": {
                "opendata": "data/output/mapharma_open_data.json",
                "valid_campaigns": "data/input/mapharma_campagnes_valides.json",
                "invalid_campaigns": "data/input/mapharma_campagnes_inconnues.json"
            },
            "slot_limit": 50,
            "business_days": [
                "lundi",
                "mardi",
                "mercredi",
                "jeudi",
                "vendredi",
                "samedi",
                "dimanche"
            ],
            "filters": {
                "valid_campaigns": [
                    "vaccination covid",
                    "covid 1ère injection"
                ],
                "invalid_campaigns": [
                    "test antigenique",
                    "test antigénique",
                    "test sérologique",
                    "pilulier",
                    "diététique",
                    "nutrition"
                ]
            }
        },
        "ordoclic": {
            "enabled": true,
            "timeout": 20,
            "recognized_urls": [
                "https://app.ordoclic.fr"
            ],
            "build_url": "https://app.ordoclic.fr/app/pharmacie/{slug}",
            "api": {
                "scraper": "https://api.ordoclic.fr/v1/public/search",
                "motives": "https://api.ordoclic.fr/v1/solar/entities/{entityId}/reasons",
                "slots": "https://api.ordoclic.fr/v1/solar/slots/availableSlots",
                "profile_professionals": "https://api.ordoclic.fr/v1/professionals/profile/{slug}",
                "profile_public_entities": "https://api.ordoclic.fr/v1/public/entities/profile/{slug}"
            },
            "filters": {
                "valid_injections": [1]
            },
            "scraper_payload": {
                "page": 1,
                "per_page": 10000,
                "in.isPublicProfile": true,
                "in.isCovidVaccineSupported": true,
                "or.covidOnlineBookingAvailabilities.vaccineAstraZeneca1": true,
                "or.covidOnlineBookingAvailabilities.vaccineJanssen1": true,
                "or.covidOnlineBookingAvailabilities.vaccinePfizer1": true,
                "or.covidOnlineBookingAvailabilities.vaccineModerna1": true
            }
        },
        "avecmondoc": {
            "enabled": true,
            "timeout": 25,
            "days_per_page": 7,
            "recognized_urls": [
                "https://patient.avecmondoc.com/"
            ],
            "patient_url": "https://patient.avecmondoc.com/fiche/structure/{slug}",
            "search_tries": 2,
            "api": {
                "search": "https://api.avecmondoc.com/api/Organizations/public/covid",
                "search_page_size": 10,
                "get_organization_slug": "https://api.avecmondoc.com/api/Organizations/slug/{slug}",
                "get_reasons": "https://api.avecmondoc.com/api/Organizations/getConsultationReasons",
                "availabilities_per_day": "https://api.avecmondoc.com/api/BusinessHours/availabilitiesPerDay"
            },
            "filters": {
                "valid_reasons": [
                    "Premiere injection COVID",
                    "Première injection COVID",
                    "Permière injection COVID",
                    "Première injection vaccinale COVID",
                    "Rendez-vous de première vaccination Covid",
                    "1ere vaccination astra",
                    "Injection vaccinale COVID-19 - Janssen",
                    "Injection monodose Janssen",
                    "Injection vaccinale monodose Janssen",
                    "Vaccination covid 19 janssen"
                ]
            },
            "center_scraper": {
                "business_days": {
                    "0": "Dimanche",
                    "1": "Lundi",
                    "2": "Mardi",
                    "3": "Mercredi",
                    "4": "Jeudi",
                    "5": "Vendredi",
                    "6": "Samedi"
                },
                "center_types": {
                    "pharmacie": "drugstore",
                    "cabinet": "general-practitioner",
                    "*": "vaccination-center"
                }
            }
        },
        "mesoigner": {
            "enabled": true,
            "timeout": 30,
            "recognized_urls": [
                "mesoigner.fr"
            ],
            "center_types": {
                "pharmacie": "drugstore",
                "médecin": "general-practitioner",
                "centre de vaccination": "vaccination-center"
            },
            "api": {
                "center_list": "https://www.mesoigner.fr/api/v1/vaccination/centers",
                "slots": "https://www.mesoigner.fr/api/v1/vaccination/centers/{id}/{start_date}"
            },
            "center_scraper": {
                "minimum_results": 450,
                "result_path": "data/output/mesoigner_centers.json",
                "business_days": [
                    "lundi",
                    "mardi",
                    "mercredi",
                    "jeudi",
                    "vendredi",
                    "samedi",
                    "dimanche"
                ]
            }
        }
    },
    "logger":{
        "log_requests_above" : 20
    }
}